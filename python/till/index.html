<!DOCTYPE html>
<html>
	<head>
		<title>Till System in Python - Marley Sudbury</title>
		<link rel="stylesheet" type="text/css" href="../../stylesheet.css">
		<link rel="icon" type="image/png" href="../../apple-touch-icon.png">
		<style>
			body{
				background-color: #99e6ff;
			}
			pre {
				tab-size: 4;
				border-style: double;
				background-color: white;
				padding: 5px;
				margin-bottom: 0px;
			}
		</style>
	</head>
	
	<body>
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-51649065-2', 'auto');
		  ga('send', 'pageview');

		</script>
	
		<div id="header">
			<h1>Marley Sudbury</h1>
			<a href="../">Python</a> / <em>Till System in Python</em>
		</div>
		
		<p>
			What is a till system? Well, in short I will be designing here, for you, a piece of Python code that would not look out of place at a supermarket checkout (apart from the fact it's in Python, lol).
		</p>
		
		<p>
			The first step, as always when designing a piece of software, is to set out our requirements:
		</p>
		
		<ul>
			<li>Should have two modes (regular and admin).</li>
			<li>Should be able to create, view and delete items in the admin mode.</li>
			<li>Items should be stored in a .txt file.</li>
			<li>Items can be 'scanned' (in this case, manually entering a code).</li>
			<li>Items should have three parts (code, name and price).</li>
			<li>All parts of the program should be accessible without having to restart it.</li>
			<li>Items can be added to the basket.</li>
			<li>Can calculate change to be given.</li>
		</ul>
		
		<p>
			Now, when actually implementing this, we have to consider the programming side of things. This program will use lots of functions, such as:
		</p>
		
		<ul>
			<li>A function for regular use.</li>
			<li>A function for admin use.</li>
			<li>A function for scanning / returning item data.</li>
			<li>A function for adding to the basket.</li>
			<li>A function for calculating change.</li>
		</ul>
		
		<p>
			Now time to walk through the code itself&hellip;
		</p>
<pre>
import getpass

rPassword = "Jolly"
aPassword = "Jelly"
sName = "TillOS"
sVer = "0.69"
</pre>
		<p>
			"getpass" is a python library which we will use to hide our passwords from prying eyes. Those passwords being "Jolly" and "Jelly", displayed in the source code quite plainly.
		</p>
<pre>
def startup():
	initialise()
	print("Welcome to {} v{}!".format(sName, sVer))
	mode = input("0 (Regular) | 1 (Admin): ")
	if (mode == "0"):
		regOp()
	else:
		admOp()
</pre>
		<p>
			This is the start-up procedure, called when starting the program. It calls the "initialise" procedure, and then allows the user to choose either regular use or admin use.
		</p>
<pre>
def initialise():
	file = open("items.txt", "r")
	global data
	global basket
	basket = []
	data = file.read()
	file.close()
	data = data.split("\n")
	data = [data[i:i+3] for i in range(0, len(data), 3)]
</pre>
		<p>
			This is the initialisation procedure itself. Basically it declares and defines the global data structures which will be used in our program: data, which is a 2-D list of all the items and the basket, where items are added when they are scanned.
		</p>
<pre>
def regOp():
	pssw = getpass.getpass("Password: ")
	if (pssw != rPassword):
		wrong()
	change = False
	while (change == False):
		operation = input("0 (Add) | 1 (Remove) | 2 (View) | 3 (Checkout) | 4 (Table) | 5 (Admin): ")
		if (operation == "0"):
			prodID = input("Enter prodID: ")
			if (isValid(prodID) == True):
				add(prodID)
		elif (operation == "1"):
			if len(basket) > 0:
				remove()
			else:
				print("None to remove!")
		elif (operation == "2"):
			view()
		elif (operation == "3"):
			checkout()
		elif (operation == "4"):
			table()
		elif (operation == "5"):
			change = True
		else:
			print("Invalid operation!")
	admOp()
</pre>
		<p>
			Currently, I have only made the regOp mode, so that is all I shall be showing. If the password entered is wrong, the appropriate procedure is called (see below). The variable "change" is used to change to admOp(). The regular user has access to 6 functions: add, remove, view, checkout, table, admin.
		</p>
	</body>
</html>